import{d as F,r as c,c as s,q as O,n as R,s as S,h as d,i as g,e as r,p as w,t as y,k as A,x as N,o as v,m as $}from"./index-CW84L7Dy.js";const q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2012%2012'%20width='12'%20height='12'%3e%3cpath%20d='M6%200a6%206%200%201%201%200%2012A6%206%200%200%201%206%200Zm-.705%208.737L9.63%204.403%208.392%203.166%205.295%206.263l-1.7-1.702L2.356%205.8l2.938%202.938Z'%20fill='%231a7f37'%3e%3c/path%3e%3c/svg%3e",z="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20d='M4.855.708c.5-.896%201.79-.896%202.29%200l4.675%208.351a1.312%201.312%200%200%201-1.146%201.954H1.33A1.313%201.313%200%200%201%20.183%209.058ZM7%207V3H5v4Zm-1%203a1%201%200%201%200%200-2%201%201%200%200%200%200%202Z'/%3e%3c/svg%3e",P={class:"line-edit-container"},U=["for"],j=["id","type","placeholder","disabled"],G={key:0,class:"success-icon-container"},J={key:1,class:"error-message"},K={class:"error-text"},Q=F({__name:"LineEdit",props:{label:{default:""},placeholder:{default:""},modelValue:{},validator:{},validateOnInput:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},type:{default:"text"},id:{default:""}},emits:["update:modelValue","validity-change","focus","blur"],setup(u,{expose:x,emit:k}){const e=u,n=k,f=c(null),p=c(!1),l=c(!1),a=c({isValid:!0}),V=s(()=>e.id||`line-edit-${Math.random().toString(36).substr(2,9)}`),E=s(()=>e.placeholder||e.label),m=s({get:()=>e.modelValue,set:o=>n("update:modelValue",o)}),I=s(()=>e.type),B=s(()=>p.value?"border-focused":l.value&&h.value?"border-error":l.value&&a.value.isValid&&e.modelValue?"border-valid":"border-default"),h=s(()=>l.value&&!a.value.isValid),M=s(()=>h.value&&!!a.value.message),L=s(()=>a.value.message||""),T=s(()=>l.value&&a.value.isValid&&e.modelValue.length>0),b=()=>{f.value&&!e.disabled&&f.value.focus()},C=()=>{p.value=!0,n("focus")},Z=()=>{p.value=!1,l.value=!0,i(),n("blur")},H=()=>{e.validateOnInput&&l.value&&i()},i=()=>(e.validator?a.value=e.validator(e.modelValue):a.value={isValid:!0},n("validity-change",a.value.isValid),a.value.isValid),_=o=>{const t=o.target;console.warn(`无法加载图标: ${t.src}`),t.src.includes("check-circle-fill-green")?t.outerHTML='<div class="fallback-success-icon">✓</div>':t.src.includes("alert-fill-12")&&(t.outerHTML='<div class="fallback-error-icon">!</div>')};return x({focus:()=>b(),validate:()=>i(),clear:()=>{m.value="",l.value=!1,a.value={isValid:!0}},setTouched:o=>{l.value=o,o&&i()}}),O(()=>e.modelValue,()=>{e.validateOnInput&&l.value&&i()}),R(()=>{e.modelValue&&e.validator&&S(()=>{l.value=!0,i()})}),(o,t)=>(v(),d("div",P,[u.label?(v(),d("label",{key:0,class:w(["line-edit-label",{"label-error":h.value}]),for:V.value},y(u.label),11,U)):g("",!0),r("div",{class:w(["input-wrapper",B.value]),onClick:b},[A(r("input",{id:V.value,ref_key:"inputRef",ref:f,"onUpdate:modelValue":t[0]||(t[0]=D=>m.value=D),type:I.value,class:"line-edit-input",placeholder:E.value,disabled:u.disabled,onFocus:C,onBlur:Z,onInput:H},null,40,j),[[N,m.value]]),T.value?(v(),d("div",G,[r("img",{src:q,alt:"Valid",class:"success-icon",onError:_},null,32)])):g("",!0)],2),M.value?(v(),d("div",J,[r("img",{src:z,alt:"Error",class:"error-icon",onError:_},null,32),r("span",K,y(L.value),1)])):g("",!0)]))}}),X=$(Q,[["__scopeId","data-v-0c7835ff"]]);export{X as L};
